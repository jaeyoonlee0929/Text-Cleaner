import streamlit as st
import openai
import pandas as pd
import gspread
from google.oauth2.service_account import Credentials
import time
import json

# --- UI ì„¤ì • ---
st.set_page_config(page_title="ì£¼ê´€ì‹ ë‹µë³€ ë¶„ì„ê¸°", layout="wide", page_icon="ğŸ“")
st.title("ğŸ“ ì£¼ê´€ì‹ ë‹µë³€ ìë™í™” ë¶„ì„ê¸°")
st.info("ì´ë¯¸ì§€, ê°•ì , ë³´ì™„, ì¥ì• ìš”ì¸ ë“± ì„œìˆ í˜• ë‹µë³€ì„ 3ë‹¨ê³„ë¡œ ë¶„ì„í•˜ê³ , PPT ìŠ¬ë¼ì´ë“œ ë¶„ëŸ‰ì— ë§ì¶° ìë™ìœ¼ë¡œ ë‚˜ëˆ„ì–´ ì €ì¥í•©ë‹ˆë‹¤.")

# --- ì„¤ì •ê°’ (PPT ìŠ¬ë¼ì´ë“œ ë¶„í•  ê¸°ì¤€) ---
MAX_CHARS_PER_CELL = 1000  # í•œ ì…€(ìŠ¬ë¼ì´ë“œ)ë‹¹ ìµœëŒ€ ê¸€ì ìˆ˜
MAX_LINES_PER_CELL = 10    # í•œ ì…€(ìŠ¬ë¼ì´ë“œ)ë‹¹ ìµœëŒ€ ì¤„ ìˆ˜

# --- API & Google Auth ì„¤ì • ---
try:
    if "OPENAI_API_KEY" in st.secrets:
        client = openai.OpenAI(api_key=st.secrets["OPENAI_API_KEY"])
    else:
        st.error("OpenAI API Keyê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.")
        st.stop()
    
    if "GCP_SERVICE_ACCOUNT" in st.secrets:
        creds_json = st.secrets["GCP_SERVICE_ACCOUNT"]
        fixed_creds = json.loads(creds_json.strip().replace('\n', '\\n'))
        scope = ['https://spreadsheets.google.com/feeds', 'https://www.googleapis.com/auth/drive']
        creds = Credentials.from_service_account_info(fixed_creds, scopes=scope)
        gc = gspread.authorize(creds)
        st.sidebar.success("âœ… ì‹œìŠ¤í…œ ì—°ê²° ì™„ë£Œ")
    else:
        st.error("Google ì¸ì¦ ì •ë³´ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.")
        st.stop()

except Exception as e:
    st.sidebar.error(f"âŒ ì—°ê²° ì‹¤íŒ¨: {e}")
    st.stop()

# --- ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ---
def call_gpt(text, prompt_template):
    if pd.isna(text) or str(text).strip() == "": return "ì‘ë‹µ ì—†ìŒ"
    prompt = prompt_template.format(text=text)
    
    # ì¬ì‹œë„ ë¡œì§
    for attempt in range(3):
        try:
            response = client.chat.completions.create(
                model="gpt-5",
                messages=[{"role": "user", "content": prompt}],
            )
            return response.choices[0].message.content.strip()
        except Exception as e:
            time.sleep(1)
            if attempt == 2: return f"GPT ì˜¤ë¥˜: {e}"

def ensure_columns(ws, needed):
    """ì‹œíŠ¸ ì—´ ë¶€ì¡± ì‹œ ìë™ í™•ì¥"""
    if ws.col_count < needed:
        ws.add_cols(needed - ws.col_count)

# --------------------------------------------------------------------------
# [í”„ë¡¬í”„íŠ¸ ì •ì˜]
# --------------------------------------------------------------------------

# [1ë‹¨ê³„] í•µì‹¬ ë¬¸ì¥ ì¶”ì¶œ
PROMPT_EXTRACT = """ # ë¬¸ì¥ ì¶”ì¶œ ë° ì •ê·œí™” ì˜ˆì œ
## case 1
### inputì—†ìŒ. ì˜›ë‚  ì§ì¥ì¸?
### outputã† ì˜›ë‚  ì§ì¥ì¸
## case 2
### input ê³  0 ì¢‹ì€ì‚¬ëŒ
### outputã† ê³ ã† ì¢‹ì€ì‚¬ëŒ
## case 3
### input- ì¶”ì§„ë ¥ì´ ì•„ì£¼ ê°•í•¨ (ì¼ë¡œ ë§Œë“¤ì–´ëƒ„) - í˜‘ìƒë ¥ ë›°ì–´ë‚¨ (ìš°ë¦¬ì˜/í˜‘ë ¥ì‚¬ì˜ ë‹ˆì¦ˆì™€ í˜ì¸í¬ì¸íŠ¸ë¥¼ ê¿°ëš«ì–´ í˜‘ì˜ë¥¼ ì´ëŒì–´ëƒ„) - ì†”ì„ ìˆ˜ë²”í•¨ (ì œì¼ ë§ìŒì€ ê¸°ë³¸ì´ê³ , ë§ˆë‹¤í•˜ì§€ ì•Šê³  í–‰ë™í•¨) - ë¬¸ì œë¥¼ í•´ê²°í•¨ (ìºì¹˜í•´ë‚´ê³ , í˜„ì‹¤í™”í•¨) - íŒ€ì›ë“¤ì˜ ì—­ëŸ‰ ê³„ë°œì„ ì ê·¹ ì§€ì›í•¨ (ì—…ë¬´ ìˆœí™˜ì— ëŒ€í•´ ê³ ë¯¼í•¨, ë°°ê²½ê³¼ WHYë¥¼ í•­ìƒ ê°•ì¡°í•¨)ì „ë¬¸ì„±, í–‰ë™ë ¥, ì—…ë¬´ì  care, í—Œì‹ 0
### outputã† ì¶”ì§„ë ¥ì´ ì•„ì£¼ ê°•í•¨(ì¼ë¡œ ë§Œë“¤ì–´ëƒ„). í˜‘ìƒë ¥ ë›°ì–´ë‚¨ (ìš°ë¦¬ì˜, í˜‘ë ¥ì‚¬ì˜ ë‹ˆì¦ˆì™€ í˜ì¸í¬ì¸íŠ¸ë¥¼ ê¿°ëš«ì–´ í˜‘ì˜ë¥¼ ì´ëŒì–´ëƒ„), ì†”ì„ ìˆ˜ë²”(ì œì¼ ë§ìŒì€ ê¸°ë³¸ì´ê³ , ë§ˆë‹¤í•˜ì§€ ì•Šê³  í–‰ë™í•¨), ë¬¸ì œë¥¼ í•´ê²°(ìºì¹˜í•´ë‚´ê³ , í˜„ì‹¤í™”), íŒ€ì›ë“¤ì˜ ì—­ëŸ‰ ê³„ë°œì„ ì ê·¹ ì§€ì›(ì—…ë¬´ ìˆœí™˜ì— ëŒ€í•´ ê³ ë¯¼í•¨. ë°°ê²½ê³¼ WHYë¥¼ í•­ìƒ ê°•ì¡°)ã† ì „ë¬¸ì„±, í–‰ë™ë ¥, ì—…ë¬´ì  care, í—Œì‹ 
## case 4
### inputì†”ìˆœìˆ˜ë²”
### outputã† ì†”ì„ ìˆ˜ë²”
## case 5
### inputêµ¬ì„±ì›ê°„ì˜ ì†¡í†µ
## outputã† êµ¬ì„±ì› ê°„ì˜ ì†Œí†µ
## case 6
### input- ëŠì„ì—†ëŠ” ê³ ë¯¼ ë° ì „ëµì  Approach - íŒ€ì›ë“¤ì—ê²Œ ì „ë‹¬í•˜ì§€ ì•ŠëŠ” ì 
### outputã† ëŠì„ì—†ëŠ” ê³ ë¯¼ ë° ì „ëµì  Approach. íŒ€ì›ë“¤ì—ê²Œ ì „ë‹¬í•˜ì§€ ì•ŠëŠ” ì 
## case 7
### input ì‹¤ë¬´ì§„ê³¼ ë°€ì ‘í•˜ê²Œ ì—…ë¬´ë¥¼ ì§„í–‰í•˜ê³ , ì´ìŠˆì— ëŒ€í•´ ì‹ ì†í•˜ê²Œ íŒë‹¨/ëŒ€ì‘í•¨Â  íŒ€ì›ë“¤ì˜ ì—…ë¬´ ë“±ì— ì˜ í•  ìˆ˜ ìˆë„ë¡ ë§ì€ ê´€ì‹¬ì„ ê°€ì ¸ì£¼ëŠ” ê²ƒ- ìƒí™©/ëŠ¥ë ¥ì„ ì˜ ê³ ë ¤í•˜ì—¬ ëª©í‘œë¥¼ ë‹¬ì„± - ì†”ì„ ìˆ˜ë²” í•˜ëŠ” ë¦¬ë” - ë‹¤ë…ì´ëŠ” ëŠ¥ë ¥ì´ ë›°ì–´ë‚¨
### outputã† ì‹¤ë¬´ì§„ê³¼ ë°€ì ‘í•˜ê²Œ ì—…ë¬´ë¥¼ ì§„í–‰í•˜ê³ , ì´ìŠˆì— ëŒ€í•´ ì‹ ì†í•˜ê²Œ íŒë‹¨, ëŒ€ì‘ã† íŒ€ì›ë“¤ì˜ ì—…ë¬´ ë“±ì— ì˜ í•  ìˆ˜ ìˆë„ë¡ ë§ì€ ê´€ì‹¬ì„ ê°€ì ¸ì£¼ëŠ” ê²ƒã† ìƒí™©, ëŠ¥ë ¥ì„ ì˜ ê³ ë ¤í•˜ì—¬ ëª©í‘œë¥¼ ë‹¬ì„±. ì†”ì„ ìˆ˜ë²”í•˜ëŠ” ë¦¬ë”. ë‹¤ë…ì´ëŠ” ëŠ¥ë ¥ì´ ë›°ì–´ë‚¨
## case 8
### inputê¸ì •ì ì¸ ë§ˆì¸ë“œì¶”ì§„ë ¥ì¶”ì§„ë ¥ê°•í•œ ì¶”ì§„ë ¥ê³¼ ì „ëµì  ì‚¬ê³ 
### outputã† ê¸ì •ì ì¸ ë§ˆì¸ë“œã† ì¶”ì§„ë ¥ã† ì¶”ì§„ë ¥ã† ê°•í•œ ì¶”ì§„ë ¥ê³¼ ì „ëµì  ì‚¬ê³ 
## case 9
### input. ì†”ì„ ìˆ˜ë²”Â  í˜„ì¥ê°ì„ ê°€ì§€ê³  ì†”ì„ ìˆ˜ë²” ëª¨ë¦„ ì†”ì„ ìˆ˜ë²” ë¶€í•˜ì§ì›ì— ëŒ€í•œ ì˜¨ìœ í•œ íƒœë„ ì°¨ë¶„í•œ ì„±ê²©ì„ ê°€ì¡ŒìŒ êµ¬ì„±ì›ê³¼ì˜ ì†Œí†µ ë° ì¡´ì¤‘ ì¡°ì§ ë‹¨í•©ë ¥ ì†”ì„ ìˆ˜ë²” ë¹ ë¥¸ ì¼ì²˜ë¦¬ ì§ì›ê°„ ì†Œí†µ ì†”ì„ ìˆ˜ë²”Â  Â ì†”ì„ ìˆ˜ë²” ì†”ì„ ìˆ˜ë²” ì†Œí†µ ì¶”ì§„ë ¥ ì°¨ë¶„í•˜ë©´ì„œ ê²½ì²­í•˜ê³  í•µì‹¬ì„ ì°Œë¥´ëŠ” í¬ì¸íŠ¸. ì†Œí†µ,ì¹œê·¼í•˜ê³  ê±´ìœ„ì˜ì‹ì´ ì—†ìŠµë‹ˆë‹¤. ë¦¬ë”ì‰½ í¸ì•ˆí•œ ì†Œí†µ ìƒëŒ€ë°© ì­ê²¬ì„ ê²½ì²­ ì‹¤í–‰ë ¥ í‘¸ê·¼í•œ ì¸ìƒì˜ ì¹œê·¼í•¨ ì¼ ì²˜ë¦¬ë¥¼ ë’¤ë¡œ ë¯¸ë£¨ì§€ ì•Šê³  ê¹”ê¸ˆí•˜ê²Œí•œë‹¤ ìƒê°ì„ ê°•ìš”í•˜ì§€ ì•Šê³  ì¡´ì¤‘í•˜ë©° ì´í´ì–´ì¤Œ ì†”ì„ ìˆ˜ë²” ì„±ì‹¤í•¨ ì˜¤í”ˆë§ˆì¸ë“œì™€ ì´í•´ì‹¬ ë‹¤ì–‘í•œê²½í—˜ê³¼ ë³€í™”í•˜ë ¤ëŠ” ì˜ì§€ . ë…¼ë¦¬ì ì¸ ìƒê° ë””í…Œì¼ ì¹œí™”ë ¥ íŠ¹ë³„í•œ ì‚¬í•­ì€ ì—†ë‹¤ . 0 ì§œì¦ë‚´ì§€ ì•Šê³  ë¶€ë“œëŸ½ê²Œ í’€ì–´ê°€ëŠ” ë°©ì‹ 0 êµ¬ì„±ì› ì¡´ì¤‘ê³¼ ë°°ë ¤
### outputã† ì†”ì„ ìˆ˜ë²” ã† í˜„ì¥ê°ì„ ê°€ì§€ê³  ì†”ì„ ìˆ˜ë²”ã† ì†”ì„ ìˆ˜ë²”ã† ë¶€í•˜ì§ì›ì— ëŒ€í•œ ì˜¨ìœ í•œ íƒœë„ã† ì°¨ë¶„í•œ ì„±ê²©ì„ ê°€ì¡ŒìŒã† êµ¬ì„±ì›ê³¼ì˜ ì†Œí†µ ë° ì¡´ì¤‘ã† ì¡°ì§ ë‹¨í•©ë ¥ã† ì†”ì„ ìˆ˜ë²”ã† ë¹ ë¥¸ ì¼ì²˜ë¦¬ã† ì§ì›ê°„ ì†Œí†µã† ì†”ì„ ìˆ˜ë²”ã† ì†”ì„ ìˆ˜ë²”ã† ì†”ì„ ìˆ˜ë²”ã† ì†Œí†µã† ì¶”ì§„ë ¥ã† ì°¨ë¶„í•˜ë©´ì„œ ê²½ì²­í•˜ê³  í•µì‹¬ì„ ì°Œë¥´ëŠ” í¬ì¸íŠ¸ã† ì†Œí†µ. ì¹œê·¼í•˜ê³  ê¶Œìœ„ì˜ì‹ì´ ì—†ìŒã† ë¦¬ë”ì‰½ã† í¸ì•ˆí•œ ì†Œí†µã† ìƒëŒ€ë°© ì˜ê²¬ì„ ê²½ì²­ã† ì‹¤í–‰ë ¥ã† í‘¸ê·¼í•œ ì¸ìƒì˜ ì¹œê·¼í•¨ã† ì¼ ì²˜ë¦¬ë¥¼ ë’¤ë¡œ ë¯¸ë£¨ì§€ ì•Šê³  ê¹”ë”í•˜ê²Œ í•¨ã† ìƒê°ì„ ê°•ìš”í•˜ì§€ ì•Šê³  ì¡´ì¤‘í•˜ë©° ì´ëŒì–´ ì¤Œã† ì†”ì„ ìˆ˜ë²”ã† ì„±ì‹¤í•¨ã† ì˜¤í”ˆë§ˆì¸ë“œì™€ ì´í•´ì‹¬ã† ë‹¤ì–‘í•œê²½í—˜ê³¼ ë³€í™”í•˜ë ¤ëŠ” ì˜ì§€ã† ë…¼ë¦¬ì ì¸ ìƒê°ã† ë””í…Œì¼ã† ì¹œí™”ë ¥ã† ì§œì¦ë‚´ì§€ ì•Šê³  ë¶€ë“œëŸ½ê²Œ í’€ì–´ê°€ëŠ” ë°©ì‹ã† êµ¬ì„±ì› ì¡´ì¤‘ê³¼ ë°°ë ¤
## case 10
### inputíŠ¹ë³„íˆ ê°œì„ ì´ í•„ìš”í•œ ë¶€ë¶„ì€ ì—†ìŒ
### outputã† ì‘ë‹µ ë‚´ìš© ì—†ìŒ
## case 11
### inputíŠ¹ë³„íˆ ì—†ìŠµë‹ˆë‹¤. í™œì„±í™”í•  í•„ìš” ìˆìŒ (íšŒì˜, ê³µìœ  ë“±) R&Rì„ ì´ì•¼ê¸°í•  í•„ìš” ìˆìŒ. ìœ„ì„í•  í•„ìš”ê°€ ìˆìŒ. ì—†ìŒíœ´ì‹ì´ í•„ìš”í•¨ì—…ë¬´ ë¶„ë°°
### outputã† í™œì„±í™”í•  í•„ìš” ìˆìŒ(íšŒì˜, ê³µìœ  ë“±). R&Rì„ ì´ì•¼ê¸°í•  í•„ìš” ìˆìŒ. ìœ„ì„í•  í•„ìš”ê°€ ìˆìŒã† íœ´ì‹ì´ í•„ìš”ã† ì—…ë¬´ ë¶„ë°°
## case 12
### inputê²°ì •ë ¥ ì¶”ì§„ë ¥ íŒë‹¨ë ¥ ì´í•´ë ¥ ê¸°íƒ€ ë“±ë“± 0 ì—†ìŒ ì•ˆê±´ì— ëŒ€í•œ ë¹ ë¥¸ ê²°ì •ì´ í•„ìš”. 1. ì¢€ ëŠë¦° í”¼ë“œë°± 2. ì—…ë¬´ ì§€ì •ì´ í•„ìš”
### outputã† ê²°ì •ë ¥ ì¶”ì§„ë ¥ íŒë‹¨ë ¥ ì´í•´ë ¥ ê¸°íƒ€ ë“±ë“±ã† ì•ˆê±´ì— ëŒ€í•œ ë¹ ë¥¸ ê²°ì •ì´ í•„ìš”ã† ì¢€ ëŠë¦° í”¼ë“œë°±. ì—…ë¬´ ì§€ì •ì´ í•„ìš”
## case 13
### inputì§ì±…ì ê²½í—˜/ê²½ë ¥ .ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ ë§ì´ ë°›ìŒ. ìŠ¤íŠ¸ë ˆìŠ¤ ì¡°ì ˆì´ í•„ìš”í•´ ë³´ì„ . 0
### outputã† ì§ì±…ì ê²½í—˜, ê²½ë ¥ã† ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ ë§ì´ ë°›ìŒ. ìŠ¤íŠ¸ë ˆìŠ¤ ì¡°ì ˆì´ í•„ìš”í•´ ë³´ì„
## case 14
### inputê°œì¸ ì—­ëŸ‰ì„ ìœ„í•œ ì œì•ˆ 1 ì—†ìŒ ì—†ìŒë°˜ì˜ë˜ëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤. ì¢€ ë” ë°€ì–´ë¶™ì´ì…¨ìœ¼ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤. í¬ê²Œ ì—†ëŠ”ê±° ê°™ë‹¤
### outputã† ê°œì¸ ì—­ëŸ‰ì„ ìœ„í•œ ì œì•ˆã† ë°˜ì˜ë˜ëŠ” ê²ƒ ê°™ìŒ. ì¢€ ë” ë°€ì–´ë¶™ì´ì…¨ìœ¼ë©´ ì¢‹ê² ìŒ
## case 15
### inputì§€ê¸ˆì²˜ëŸ¼ ë“ ë“ í•œ ì§€ì›êµ°ì´ ë˜ì–´ì£¼ì„¸ìš”! ë§Œì¡±í•©ë‹ˆë‹¤. í™”..ì´íŒ…
### outputã† ì§€ê¸ˆì²˜ëŸ¼ ë“ ë“ í•œ ì§€ì›êµ°ì´ ë˜ì–´ ì£¼ì‹œê¸° ë°”ëŒã† ë§Œì¡±ã† í™”ì´íŒ…
## case 16
### inputì‹¤í–‰ì£¼ì˜ / ë¹ ë¥¸ í”¼ë“œë°± / ë„“ì€ ì‹œ
### outputã† ì‹¤í–‰ì£¼ì˜, ë¹ ë¥¸ í”¼ë“œë°±, ë„“ì€ ì‹œì•¼
## case 17
### inputì¼ì° ì¼ì–´ë‚œ ìƒˆê°€ ë¨¼ì € ë²Œë ˆë¥¼ ë¨¹ëŠ”ë‹¤. ëª¨ë“  ì‚¬ëŒê³¼ ë‘ë£¨ ê´€ê³„ê°€ ì¢‹ì€ ìœ ì¬ì„.1. íƒ€ íŒ€ë¦¬ë”ì™€ ë‹¤ë¥´ê²Œ êµ°ëŒ€ì˜ í–‰ë³´ê´€ê³¼ ê°™ì´ ëª¨ë“  ì—…ë¬´ì— ë‹¤ ê´Œì‹¬ì„ ì£¼ì‹œê³  ì†”ì„ ìˆ˜ë²”í•˜ì—¬, êµ¬ì„±ì›ì˜ ì—…ë¬´ìƒ ì–´ë ¤ìš´ ë¶€ë¶„ì´ ì˜ í•´ê²°ë  ìˆ˜ ìˆë„ë¡ ë„ì›€ì„ ì£¼ì‹­ë‹ˆë‹¤. 2. ê¶Œìœ„ì ì´ì§€ ì•Šì•„ ì—…ë¬´ì , ì‚¬ì ì¸ ë‚´ìš© ëª¨ë‘ í¸ì•ˆíˆ ëŒ€í™”í•  ìˆ˜ ìˆì–´ ì¹œêµ¬ì™€ ëŒ€í™”í•˜ë“¯ì´ ì´ì•¼ê¸° í•  ìˆ˜ ìˆì–´ í¸í•˜ê³  ì¢‹ìŠµë‹ˆë‹¤. .ë³´ì‚´ ì†Œí†µì˜ ë¦¬ë”ì‹­ê¸ì •, ì˜¨ìœ  ë§¤ì‚¬ ê¸ì •ì ì´ê³  ì„±ê²©ê³¼ íƒœë„ê°€ ì˜¨í™”í•˜ê³  ë¶€ë“œëŸ½ë‹¤.KTX ë…ìˆ˜ë¦¬ì§œì¦ .12ìƒ‰ìƒ ìƒ‰ì—°í•„ - ê°œì„±ìˆê²Œ í‘œí˜„í•˜ê³ , ìƒí™©ì— ë”°ë¼ ë§ëŠ” í–‰ë™ì„ í•¨ ë°±ê³¼ì‚¬ì „ - ì •ë³´ì™€ ì§€ì‹ì´ ëª¨ë‘ ìˆëŠ” ì¥ì†ŒëŒ€ìª½ê°™ì€/ë‹«í˜€ìˆëŠ”ë‚˜ë¥¼ ë”°ë¥´ë¼/ë‚˜í´ë ˆì˜¹ë°”ë‹¤ ìœ„ì˜ ë¬´ëª¨í•œ í•­í•´ì-ë‚˜ì¹¨ë°˜ë„, ì„¸ì‹¬í•œ ê³„íšë„ ì—†ì´ í•­í•´ë¥¼ ì§€ì‹œí•¨ ì‚¬ë§‰ì˜ ê±´ì¶•ê°€-ê³„íšì„ ê°€ì§€ê³  ìˆì§€ë§Œ, ê·¸ë¦¬ëŠ” ì„¤ê³„ë„ë§Œ ì œì‹œí•¨- í”„ë¡œí˜ì…”ë„ì„ ì „íŒŒí•˜ëŠ” ì½”ì¹˜: ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ ë°©ë²•ì„ ë°”íƒ•ìœ¼ë¡œ í”¼ë“œë°±ì„ ì „í•´ì£¼ëŠ” ì½”ì¹˜ë¼ê³  ìƒê°í•©ë‹ˆë‹¤. ì§„ì‹¬ì–´ë¦° í”¼ë“œë°±ì„ ì „ë‹¬í•´ ì£¼ì‹­ë‹ˆë‹¤. - ë‚˜ì¹¨ë°˜ê³¼ ì§€ë„: ì¡°ì§ê³¼ êµ¬ì„±ì›ì˜ ì§€ë„ë¥¼ ê·¸ë ¤ì£¼ì‹  í›„, ì—­í• ê³¼ ì±…ì„, ì ì ˆí•œ ë‚˜ì¹¨ë°˜(í”¼ë“œë°±)ì„ ì œê³µí•´ ì£¼ì‹œëŠ” ë¦¬ë”ì‹­ì…ë‹ˆë‹¤. êµ¬ì„±ì›ì´ ì„±ì¥í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ì‹­ë‹ˆë‹¤. êµ¬ì„±ì›ì„ ë¯¿ì–´ì¤€ë‹¤. ìƒˆë¡œìš´ ì•„ì´ë””ì–´ë¥¼ ìì£¼ ë‚¸ë‹¤.- ì „ëµê¸°íšíŒ€ íŒ€ì¥ìœ¼ë¡œì„œ, ì—…ë¬´ë¥¼ ì¶”ì§„/ìœ„ì„/ë°°ë¶„í•˜ì—¬ ì£¼ì‹­ë‹ˆë‹¤. ë‚˜ì•„ê°€, ì˜ë¯¸ë¥¼ ë°œê²¬í•˜ì‹œì–´, ë¦¬ë”ì‹­ì„ ê°–ì¶”ì…¨ë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤.Â  -Â  ê°œë°©ì ìœ¼ë¡œ ìˆ˜ìš©í•˜ê³ , ê³µìœ  ë¬¸í™”ë¥¼ ì´‰ì§„í•˜ë©°, ë¦¬ë”ì‹­ì„ ê°–ì¶”ì…¨ë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤.Â  Â - ì†”ì„ ìˆ˜ë²”í•˜ì—¬ ë³´ì—¬ì£¼ì‹œë©°, ë¦¬ë”ì‹­ì„ ê°–ì¶”ì…¨ë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤.ë‹´ë°°ì§ì ‘ì ìœ¼ë¡œ í‘œí˜„ì„ ì¢€ ë” í•˜ì…¨ìœ¼ë©´ í•©ë‹ˆë‹¤. ì•½ê°„ì˜ ê°•ë°•ê´€ë…ì„ ëœì–´ë‚´ì…¨ìœ¼ë©´ í•©ë‹ˆë‹¤.1. ê·¸ë£¹ì¥ë‹˜ë„ ì•¼ê·¼ì„ ë§ì´ ì•ˆ í•˜ì…¨ìœ¼ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤.Â  2. ì—†ìŠµë‹ˆë‹¤. ê·¸ë£¹ì¥ë‹˜ ë³¸ì¸ê»˜ì„œ ì•¼ê·¼ì„ ë§ì´ í•˜ì‹œëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤. êµ¬ì„±ì›ë“¤ì—ê²Œ ë§¡ê¸°ê³  í‡´ê·¼í•´ì£¼ì‹œë©´ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.ë³¸ì¸ ì›Œë¼ë°¸ ë° ê±´ê°•ê´€ë¦¬ å¤– N/Aì—…ë¬´ê°€ ìƒëŒ€ì ìœ¼ë¡œ ì—¬ìœ ìˆëŠ” êµ¬ì„±ì›ë“¤ì˜ ì—­ëŸ‰ì„ ëŒì–´ì˜¬ë¦´ìˆ˜ ìˆê²Œ ë” í˜ì¨ ì£¼ì‹œë©´ ì¢‹ê² ë‹¤.ê°œì¸ì˜ ìŠ¤íŠ¸ë ˆìŠ¤ 1. SKí™˜ê²½ê³¼í•™ê¸°ìˆ ì› ëŒ€í‘œ íŒ€ 2. ì—­ì‚¬ê°€ ê¹Šì€ íŒ€ Module ì†Œì ê°œë°œ ë‹´ë‹¹ Module ê°œë°œì˜ ìµœì¢… ë‹´ë‹¹ ë“±ëŒ€ê°™ì€ ì—­í• ë¡œ ë°©í–¥ì„±ê³¼ ëª©ì ì§€ë¥¼ ì•Œë ¤ ì¤€ë‹¤. 1. íšŒì‚¬ë¥¼ ì§€í‚¤ëŠ” ìˆ˜í˜¸ì‹  : ìš°ë¦¬ íŒ€ì€ ê°€ì¥ ë¨¼ì €, ê°€ì¥ ë§ì´ ì™¸ë¶€ì˜ ì••ë°•ì„ ë°›ê²Œ ëœë‹¤. ê·¸ê±¸ ì˜¨ëª¸ìœ¼ë¡œ ë§‰ê³  ë²„í…¨ë‚´ì•¼ í•œë‹¤. ê·¸ë§Œí¼ ì—…ë¬´ ê°•ë„ê°€ ë†’ì§€ë§Œ, êµ¬ì„±ì› ëª¨ë‘ê°€ ì• ì‚¬ì‹¬ê³¼ ìë¶€ì‹¬ìœ¼ë¡œ ë˜˜ë˜˜ ë­‰ì³ ì„±ê³¼ë¥¼ ì°½ì¶œí•œë‹¤. 2. 5ë¶„ ëŒ€ê¸°ì¡° : ìš°ë¦¬ íŒ€ì€ ì™¸ë¶€ SHì™€ì˜ ê°‘ì„ê´€ê³„ì—ì„œ ì² ì €í•œ ì„ì´ë‹¤. ê·¸ë ‡ê¸°ì— ì¡°ê¸ˆ ê³¼ì¥í•˜ìë©´ 1ë…„ 365ì¼ í•˜ë£¨ 24ì‹œê°„ ë‚´ë‚´ ê¸´ì¥ì˜ ëˆì„ ë†“ì„ ìˆ˜ ì—†ëŠ” ìƒíƒœì´ë‹¤. ë§ í•œë§ˆë””ê°€ ì¡°ì‹¬ìŠ¤ëŸ½ê³  ë¯¼ê°í•˜ë‹¤. ëŠ˜ ì–´ë µê³  í˜ë“  ìƒí™©ì—ì„œ ê·¼ë¬´í•˜ê³  ìˆë‹¤. ì“°ë ˆê¸°í†µ ì¸µì¸µì‹œí•˜ .íŠ¹ìˆ˜ë¶€ëŒ€: ê·¸ë£¹ ì°¨ì›ì—ì„œ ì¤‘ëŒ€í•œ ì‚¬ì•ˆì´ ìƒê¸¸ ë•Œ, ìš°ë¦¬ ì¡°ì§ì´ ë¨¼ì € íˆ¬ì…ë˜ì–´ ì‹ ì†ëŒ€ì‘ì„ í•©ë‹ˆë‹¤. í•˜ì´ì—ë‚˜: ì´ˆì›ì—ì„œ ë¨¹ì„ ê²ƒì„ ì°¾ì•„ ë§ˆì§€ë§‰ ê³ ê¸° í•œì ê¹Œì§€ ë°œë¼ë¨¹ëŠ” í•˜ì´ì—ë‚˜ì²˜ëŸ¼, ìš°ë¦¬ ì¡°ì§ë„ ë§ˆì§€ë§‰ í•œ ì¹˜ì˜ ì˜¤ì°¨ë„ ì—†ì´ ì—…ë¬´ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤. ë³´ìˆ˜ì  ì œí•œì  ì˜ì‚¬ê²°ì • ì¬ë¬´ ììœ¨ì„± ìˆ˜í‰ì ì´ê³  í‰ë“±í•œ ê°€ì¡± ê°™ì€ íŒ€ì…ë‹ˆë‹¤ ìœµí•© , ê°ìì˜ ì „ë¬¸ì„±ì„ ë”°ë¡œ ë˜ ê°™ì´ ì¡°í™”ë¡­ê²Œ ì¡°ìœ¨í•˜ê³  ê²½í—˜ê³¼ ì„¼ìŠ¤ë¥¼ ë”í•˜ì—¬ ì¢‹ì€ ê²°ê³¼ë¬¼ì„ ë§Œë“¤ì–´ë‚¸ë‹¤ ì‚¬ì´ê°€ ì¢‹ê³  ì„œë¡œ ê°€ê¹ê²Œ ì§€ë‚¸ë‹¤ ê³¼ì œ, ì—…ë¬´ ì§„í–‰ì‹œ ë„ì „ì ì´ê³  ì–´ë–¤ì‹ìœ¼ë¡œë„ ì¼ì„ ì™„ìˆ˜í•´ë‚´ë ¤ëŠ” ë…¸ë ¥ì„ ë§ì´ í•œë‹¤ ê°ì ë‹¤ë¥¸ ì—…ë¬´ë¥¼ ë³´ë‹¤ê°€ë„ í•œ ê°€ì§€ ì´ìŠˆì‚¬í•­ì— ëŒ€í•´ ëª¨ì¼ ì¤„ ì•„ëŠ” ë‹¨í•©ë ¥ì´ ê°•ì ì…ë‹ˆë‹¤. ê·¸ ì¤‘ì‹¬ì—ëŠ” ì¤‘ì‹¬ì„ ì¡ì•„ì£¼ì‹œëŠ” PLë‹˜ë“¤ì´ ê³„ì‹­ë‹ˆë‹¤. ìˆ˜í‰ì ì¸ ë¶„ìœ„ê¸°ê°€ ê°•ì ì´ë¼ê³  ìƒê°ë©ë‹ˆë‹¤.ê³µì¥ì¥ë‹˜ ì§ì† ì¡°ì§ìœ¼ë¡œ ì„œì‚° 3ë™ ê³µì¥ì˜ ì„±ê³µì ì¸ ì¦ì„¤ì´ë¼ëŠ” ëª…í™•í•œ ëª©ì ìœ¼ë¡œ êµ¬ì„±ëœ ì¡°ì§ìœ¼ë¡œ ê³µí†µëœ ëª©í‘œë¥¼ ê°–ê³  íš¨ê³¼ì ì´ê³  íš¨ìœ¨ì ì¸ ì—…ë¬´ ì§„í–‰ì´ ê°€ëŠ¥í•˜ë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤. ë‚©ê¸°ë¥¼ ë„ˆë¬´ ì˜ ë§ì¶°ì„œ ì¼ì •ì— ì—¬ìœ ë¥¼ ê°€ì¡Œìœ¼ë©´ í•©ë‹ˆë‹¤.
### outputã† ì¼ì° ì¼ì–´ë‚œ ìƒˆê°€ ë¨¼ì € ë²Œë ˆë¥¼ ë¨¹ìŒ. ëª¨ë“  ì‚¬ëŒê³¼ ë‘ë£¨ ê´€ê³„ê°€ ì¢‹ì€ ìœ ì¬ì„ã† íƒ€ íŒ€ ë¦¬ë”ì™€ ë‹¤ë¥´ê²Œ êµ°ëŒ€ì˜ í–‰ë³´ê´€ê³¼ ê°™ì´ ëª¨ë“  ì—…ë¬´ì— ë‹¤ ê´€ì‹¬ì„ ì£¼ì‹œê³  ì†”ì„ ìˆ˜ë²”í•˜ì—¬, êµ¬ì„±ì›ì˜ ì—…ë¬´ìƒ ì–´ë ¤ìš´ ë¶€ë¶„ì´ ì˜ í•´ê²°ë  ìˆ˜ ìˆë„ë¡ ë„ì›€ì„ ì£¼ì‹¬. ê¶Œìœ„ì ì´ì§€ ì•Šì•„ ì—…ë¬´ì , ì‚¬ì ì¸ ë‚´ìš© ëª¨ë‘ í¸ì•ˆíˆ ëŒ€í™”í•  ìˆ˜ ìˆì–´ ì¹œêµ¬ì™€ ëŒ€í™”í•˜ë“¯ì´ ì´ì•¼ê¸° í•  ìˆ˜ ìˆì–´ í¸í•˜ê³  ì¢‹ìŒã† ë³´ì‚´, ì†Œí†µì˜ ë¦¬ë”ì‹­ã† ê¸ì •, ì˜¨ìœ , ë§¤ì‚¬ ê¸ì •ì ì´ê³  ì„±ê²©ê³¼ íƒœë„ê°€ ì˜¨í™”í•˜ê³  ë¶€ë“œëŸ¬ì›€ã† KTX, ë…ìˆ˜ë¦¬ã† ì§œì¦ ã† 12ìƒ‰ìƒ ìƒ‰ì—°í•„: ê°œì„±ìˆê²Œ í‘œí˜„í•˜ê³ , ìƒí™©ì— ë”°ë¼ ë§ëŠ” í–‰ë™ì„ í•¨. ë°±ê³¼ì‚¬ì „: ì •ë³´ì™€ ì§€ì‹ì´ ëª¨ë‘ ìˆëŠ” ì¥ì†Œã† ëŒ€ìª½ ê°™ì€, ë‹«í˜€ ìˆëŠ”ã† ë‚˜ë¥¼ ë”°ë¥´ë¼, ë‚˜í´ë ˆì˜¹ã† ë°”ë‹¤ ìœ„ì˜ ë¬´ëª¨í•œ í•­í•´ì: ë‚˜ì¹¨ë°˜ë„, ì„¸ì‹¬í•œ ê³„íšë„ ì—†ì´ í•­í•´ë¥¼ ì§€ì‹œ. ì‚¬ë§‰ì˜ ê±´ì¶•ê°€: ê³„íšì„ ê°€ì§€ê³  ìˆì§€ë§Œ, ê·¸ë¦¬ëŠ” ì„¤ê³„ë„ë§Œ ì œì‹œã† - í”„ë¡œí˜ì…”ë„ì„ ì „íŒŒí•˜ëŠ” ì½”ì¹˜: ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ ë°©ë²•ì„ ë°”íƒ•ìœ¼ë¡œ í”¼ë“œë°±ì„ ì „í•´ì£¼ëŠ” ì½”ì¹˜ë¼ê³  ìƒê°. ì§„ì‹¬ ì–´ë¦° í”¼ë“œë°±ì„ ì „ë‹¬í•´ ì£¼ì‹¬. ë‚˜ì¹¨ë°˜ê³¼ ì§€ë„: ì¡°ì§ê³¼ êµ¬ì„±ì›ì˜ ì§€ë„ë¥¼ ê·¸ë ¤ ì£¼ì‹  í›„, ì—­í• ê³¼ ì±…ì„, ì ì ˆí•œ ë‚˜ì¹¨ë°˜(í”¼ë“œë°±)ì„ ì œê³µí•´ ì£¼ì‹œëŠ” ë¦¬ë”ì‹­. êµ¬ì„±ì›ì´ ì„±ì¥í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ì‹¬ã† êµ¬ì„±ì›ì„ ë¯¿ì–´ì¤Œ. ìƒˆë¡œìš´ ì•„ì´ë””ì–´ë¥¼ ìì£¼ ëƒ„ã† ì „ëµê¸°íšíŒ€ íŒ€ì¥ìœ¼ë¡œì„œ, ì—…ë¬´ë¥¼ ì¶”ì§„/ìœ„ì„/ë°°ë¶„í•˜ì—¬ ì£¼ì‹¬. ë‚˜ì•„ê°€, ì˜ë¯¸ë¥¼ ë°œê²¬í•˜ì‹œì–´, ë¦¬ë”ì‹­ì„ ê°–ì¶”ì…¨ë‹¤ê³  ìƒê°. ê°œë°©ì ìœ¼ë¡œ ìˆ˜ìš©í•˜ê³ , ê³µìœ  ë¬¸í™”ë¥¼ ì´‰ì§„í•˜ë©°, ë¦¬ë”ì‹­ì„ ê°–ì¶”ì…¨ë‹¤ê³  ìƒê°. ì†”ì„ ìˆ˜ë²”í•˜ì—¬ ë³´ì—¬ì£¼ì‹œë©°, ë¦¬ë”ì‹­ì„ ê°–ì¶”ì…¨ë‹¤ê³  ìƒê°ã† ë‹´ë°°ã† ì§ì ‘ì ìœ¼ë¡œ í‘œí˜„ì„ ì¢€ ë” í•˜ì…¨ìœ¼ë©´ í•¨. ì•½ê°„ì˜ ê°•ë°•ê´€ë…ì„ ëœì–´ë‚´ì…¨ìœ¼ë©´ í•¨ã† ê·¸ë£¹ì¥ë‹˜ë„ ì•¼ê·¼ì„ ë§ì´ ì•ˆ í•˜ì…¨ìœ¼ë©´ ì¢‹ê² ìŒã† ê·¸ë£¹ì¥ë‹˜ ë³¸ì¸ê»˜ì„œ ì•¼ê·¼ì„ ë§ì´ í•˜ì‹œëŠ” ê²ƒ ê°™ìŒ. êµ¬ì„±ì›ë“¤ì—ê²Œ ë§¡ê¸°ê³  í‡´ê·¼í•´ì£¼ì‹œë©´ ì¢‹ì„ ê²ƒ ê°™ìŒã† ë³¸ì¸ ì›Œë¼ë°¸ ë° ê±´ê°•ê´€ë¦¬ã† ì—…ë¬´ê°€ ìƒëŒ€ì ìœ¼ë¡œ ì—¬ìœ  ìˆëŠ” êµ¬ì„±ì›ë“¤ì˜ ì—­ëŸ‰ì„ ëŒì–´ì˜¬ë¦´ ìˆ˜ ìˆê²Œ ë” í˜ì¨ ì£¼ì‹œë©´ ì¢‹ê² ìŒã† ê°œì¸ì˜ ìŠ¤íŠ¸ë ˆìŠ¤ ã† SK í™˜ê²½ê³¼í•™ê¸°ìˆ ì› ëŒ€í‘œ íŒ€, ì—­ì‚¬ê°€ ê¹Šì€ íŒ€ã† Module ì†Œì ê°œë°œ ë‹´ë‹¹, Module ê°œë°œì˜ ìµœì¢… ë‹´ë‹¹ã† ë“±ëŒ€ ê°™ì€ ì—­í• ë¡œ ë°©í–¥ì„±ê³¼ ëª©ì ì§€ë¥¼ ì•Œë ¤ ì¤Œã† íšŒì‚¬ë¥¼ ì§€í‚¤ëŠ” ìˆ˜í˜¸ì‹ : ìš°ë¦¬ íŒ€ì€ ê°€ì¥ ë¨¼ì €, ê°€ì¥ ë§ì´ ì™¸ë¶€ì˜ ì••ë°•ì„ ë°›ê²Œ ë¨. ê·¸ê±¸ ì˜¨ëª¸ìœ¼ë¡œ ë§‰ê³  ë²„í…¨ë‚´ì•¼ í•¨. ê·¸ë§Œí¼ ì—…ë¬´ ê°•ë„ê°€ ë†’ì§€ë§Œ, êµ¬ì„±ì› ëª¨ë‘ê°€ ì• ì‚¬ì‹¬ê³¼ ìë¶€ì‹¬ìœ¼ë¡œ ë˜˜ë˜˜ ë­‰ì³ ì„±ê³¼ë¥¼ ì°½ì¶œ. 5ë¶„ ëŒ€ê¸°ì¡°: ìš°ë¦¬ íŒ€ì€ ì™¸ë¶€ SHì™€ì˜ ê°‘ì„ê´€ê³„ì—ì„œ ì² ì €í•œ ì„. ê·¸ë ‡ê¸°ì— ì¡°ê¸ˆ ê³¼ì¥í•˜ìë©´ 1ë…„ 365ì¼ í•˜ë£¨ 24ì‹œê°„ ë‚´ë‚´ ê¸´ì¥ì˜ ëˆì„ ë†“ì„ ìˆ˜ ì—†ëŠ” ìƒíƒœ. ë§ í•œë§ˆë””ê°€ ì¡°ì‹¬ìŠ¤ëŸ½ê³  ë¯¼ê°. ëŠ˜ ì–´ë µê³  í˜ë“  ìƒí™©ì—ì„œ ê·¼ë¬´ã† ì“°ë ˆê¸°í†µã† ì¸µì¸µì‹œí•˜ã† íŠ¹ìˆ˜ë¶€ëŒ€: ê·¸ë£¹ ì°¨ì›ì—ì„œ ì¤‘ëŒ€í•œ ì‚¬ì•ˆì´ ìƒê¸¸ ë•Œ, ìš°ë¦¬ ì¡°ì§ì´ ë¨¼ì € íˆ¬ì…ë˜ì–´ ì‹ ì†ëŒ€ì‘. í•˜ì´ì—ë‚˜: ì´ˆì›ì—ì„œ ë¨¹ì„ ê²ƒì„ ì°¾ì•„ ë§ˆì§€ë§‰ ê³ ê¸° í•œì ê¹Œì§€ ë°œë¼ ë¨¹ëŠ” í•˜ì´ì—ë‚˜ì²˜ëŸ¼, ìš°ë¦¬ ì¡°ì§ë„ ë§ˆì§€ë§‰ í•œ ì¹˜ì˜ ì˜¤ì°¨ë„ ì—†ì´ ì—…ë¬´ë¥¼ ì²˜ë¦¬ã† ë³´ìˆ˜ì , ì œí•œì , ì˜ì‚¬ê²°ì •ã† ì¬ë¬´, ììœ¨ì„±ã† ìˆ˜í‰ì ì´ê³  í‰ë“±í•œ ê°€ì¡± ê°™ì€ íŒ€ã† ìœµí•© , ê°ìì˜ ì „ë¬¸ì„±ì„ ë”°ë¡œ ë˜ ê°™ì´ ì¡°í™”ë¡­ê²Œ ì¡°ìœ¨í•˜ê³  ê²½í—˜ê³¼ ì„¼ìŠ¤ë¥¼ ë”í•˜ì—¬ ì¢‹ì€ ê²°ê³¼ë¬¼ì„ ë§Œë“¤ì–´ë‚¸ë‹¤ ì‚¬ì´ê°€ ì¢‹ê³  ì„œë¡œ ê°€ê¹ê²Œ ì§€ëƒ„ã† ê³¼ì œ, ì—…ë¬´ ì§„í–‰ì‹œ ë„ì „ì ì´ê³  ì–´ë–¤ì‹ìœ¼ë¡œë„ ì¼ì„ ì™„ìˆ˜í•´ë‚´ë ¤ëŠ” ë…¸ë ¥ì„ ë§ì´ í•¨ã† ê°ì ë‹¤ë¥¸ ì—…ë¬´ë¥¼ ë³´ë‹¤ê°€ë„ í•œ ê°€ì§€ ì´ìŠˆì‚¬í•­ì— ëŒ€í•´ ëª¨ì¼ ì¤„ ì•„ëŠ” ë‹¨í•©ë ¥ì´ ê°•ì . ê·¸ ì¤‘ì‹¬ì—ëŠ” ì¤‘ì‹¬ì„ ì¡ì•„ì£¼ì‹œëŠ” PLë‹˜ë“¤ì´ ê³„ì‹¬ã† ìˆ˜í‰ì ì¸ ë¶„ìœ„ê¸°ê°€ ê°•ì ì´ë¼ê³  ìƒê°ã† ê³µì¥ì¥ë‹˜ ì§ì† ì¡°ì§ìœ¼ë¡œ ì„œì‚° 3ë™ ê³µì¥ì˜ ì„±ê³µì ì¸ ì¦ì„¤ì´ë¼ëŠ” ëª…í™•í•œ ëª©ì ìœ¼ë¡œ êµ¬ì„±ëœ ì¡°ì§ìœ¼ë¡œ ê³µí†µëœ ëª©í‘œë¥¼ ê°–ê³  íš¨ê³¼ì ì´ê³  íš¨ìœ¨ì ì¸ ì—…ë¬´ ì§„í–‰ì´ ê°€ëŠ¥í•˜ë‹¤ê³  ìƒê°ã† ë‚©ê¸°ë¥¼ ë„ˆë¬´ ì˜ ë§ì¶°ì„œ ì¼ì •ì— ì—¬ìœ ë¥¼ ê°€ì¡Œìœ¼ë©´ í•¨
## case 18
### inputíŠ¹ì´ì‚¬í•­ì—†ìŒ.ì¤‘ì¥ê¸° ê³„íšì´ ì—†ì´, ë‹¨ê¸°(1ë…„) ê³„íšë§Œ ìˆë‹¤ê³ ê°ì‚¬ì˜ ì´ìµê³¼ ìš°ë¦¬íšŒì‚¬ì˜ ì´ìµì´ ë‹¬ë¼ì„œ ìƒí˜¸ì¶©ëŒí•œë‹¤.ì„œë¡œì˜ ê°œì„±ì´ ì›Œë‚™ ë‹¤ì–‘í•˜ë‹¤ ë³´ë‹ˆ ì—…ë¬´ ì™¸ êµ¬ì‹¬ì ì„ ê°€ì§ˆ ìˆ˜ ìˆëŠ” ì£¼ì¬ë¥¼ ì°¾ê¸°ê°€ ì‰½ì§€ ì•–ìŠµë‹ˆë‹¤. ìš°ë¦¬ ì¡°ì§ì€ ë§¤ë…„ ë™ì¼í•œ íŒ¨í„´ì˜ ê²½ì˜ëª©í‘œ(ë§¤ì¶œ/ë§ˆì§„ ë“±), ê²½ì˜ì „ëµìœ¼ë¡œ ì—…ë¬´ë¥¼ ìˆ˜í–‰í•´ì™”ìŠµë‹ˆë‹¤. ëª©í‘œì™€ ë°©í–¥ì„±ì´ ë°”ë€Œì–´ì•¼ í•œë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤.ë§¡ì€ ì—…ë¬´ì˜ ë³¸ì§ˆ(ì•„ì´í‹° ê¸°ìˆ ë ¥)ì— ëŒ€í•´ ë³´ì™„ í•´ì•¼ í•œë‹¤.íŒ€ë³„ ê·œëª¨ê°€ ë„ˆë¬´ í¬ë‹¤. ì„¸ë¶„í™”í•  í•„ìš”ê°€ ìˆìŒê³ ê°ì‚¬ê°€ ì¶”êµ¬í•˜ëŠ” ë°”ê°€ ì‹œìŠ¤í…œì˜ ì•ˆì •ì ì¸ ìš´ì˜ì— ì´ˆì ì´ ë§ì¶”ì–´ ìˆë‹¤ë³´ë‹ˆ ìƒˆë¡œìš´ / ê³¼ê°í•œ ì‹œë„ê°€ ì ê³  ì´ë¥¼ ì§€ì›í•˜ëŠ”ë° ìˆì–´ ë¶€ì¡±í•¨ì´ ë§ì€ ë“¯ í•©ë‹ˆë‹¤. ì´ì— ì¡°ì§ì´ ì ì  ë” íŒ¨ì‹œë¸Œí•˜ê²Œ ë°”ë€Œì–´ê°€ì˜¤ ìˆë‹¤ê³  ëŠê»´ì§‘ë‹ˆë‹¤. ì¢€ ë” ëŠ¥ë™ì ì¸ ì¡°ì§ìœ¼ë¡œ íƒˆë°”ê¿ˆí•  ìˆ˜ ìˆë„ë¡ ë³€í™”ê°€ í•„ìš”í•˜ë‹¤ê³  ìƒê°ë©ë‹ˆë‹¤.IT ì—­ëŸ‰ ì¡°ì§ ëª©í‘œì„ ìœ„í•œ ë¦¬ë” - êµ¬ì„±ì›ê°„ ë‹¤ì–‘í•œ ì†Œí†µ ì±„ë„, ì†Œí†µ ê¸°íšŒ, ì†Œí†µ íšŸìˆ˜, ì†Œí†µ í”¼ë“œë°±ì´ í™•ëŒ€ ë˜ì—ˆìœ¼ë©´ í•©ë‹ˆë‹¤ì „ë¬¸ê°€ë“¤ì´ ë§ìœ¼ë‹ˆ ë°€ì–´ë¶€ì¹˜ëŠ” AGS ëŒ€í•œ ìš°ë ¤ê°€ ë§¤ìš° ë†’ìŠµë‹ˆë‹¤. ì§„í–‰ì— ìˆì–´ êµ¬ì„±ì›ì˜ ì˜ê²¬ë„ ì²­ì·¨í•´ ì£¼ì„¸ìš”.S3 TFëŠ” ì—¬ëŸ¬ ì¡°ì§ì˜ êµ¬ì„±ì›ì´ ëª¨ì¸ ìë¦¬ ì…ë‹ˆë‹¤. ë¬´ì¡°ê±´ ì ì¸ CAPEX ì ˆê°ì´ ì•„ë‹Œ ê¸°ìˆ  ì¶œì‹  êµ¬ì„±ì›ì˜ ì˜ê²¬ì´ ìš°ì„ ì ìœ¼ë¡œ ë°˜ì˜ë˜ì—ˆìœ¼ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤.ì™¸ë¶€ ìš”ì¸ìœ¼ë¡œ ì§„í–‰ì¤‘ì´ë˜ í”„ë¡œì íŠ¸ê°€ ë¬´ì‚°ì´ ë˜ëŠ” ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤. ì´ëŸ° ê²½ìš°ì—ëŠ” íŒ€, ê·¸ë¦¬ê³  ê°œì¸ì˜ ì„±ê³¼ ë° ì„±ì·¨ê°ê³¼ ì§ê²°ë˜ë¯€ë¡œ ë¯¸ë¦¬ ì´ëŸ° ì¥ì• ìš”ì¸ë“¤ì„ íŒŒì•…í•˜ê³ , ì‚¬ì „ì— ë°©ì§€í•˜ëŠ” íˆ´ë“¤ì„ ë§ˆë ¨í•´ë‘ì•„ì•¼ í•©ë‹ˆë‹¤.íšŒì‹/íŒ€ í–‰ì‚¬ ë•Œ ì‚¬ìš©í•˜ëŠ” ì§€ì› ë¹„ìš©ì´ ë¶€ì¡±í•©ë‹ˆë‹¤.
### outputã† ì¤‘ì¥ê¸° ê³„íšì´ ì—†ì´, ë‹¨ê¸°(1ë…„) ê³„íšë§Œ ìˆìŒã† ê³ ê°ì‚¬ì˜ ì´ìµê³¼ ìš°ë¦¬íšŒì‚¬ì˜ ì´ìµì´ ë‹¬ë¼ì„œ ìƒí˜¸ì¶©ëŒã† ì„œë¡œì˜ ê°œì„±ì´ ì›Œë‚™ ë‹¤ì–‘í•˜ë‹¤ ë³´ë‹ˆ ì—…ë¬´ ì™¸ êµ¬ì‹¬ì ì„ ê°€ì§ˆ ìˆ˜ ìˆëŠ” ì£¼ì¬ë¥¼ ì°¾ê¸°ê°€ ì‰½ì§€ ì•ŠìŒã† ìš°ë¦¬ ì¡°ì§ì€ ë§¤ë…„ ë™ì¼í•œ íŒ¨í„´ì˜ ê²½ì˜ëª©í‘œ(ë§¤ì¶œ/ë§ˆì§„ ë“±), ê²½ì˜ì „ëµìœ¼ë¡œ ì—…ë¬´ë¥¼ ìˆ˜í–‰í•´ì™”ìŠµë‹ˆë‹¤. ëª©í‘œì™€ ë°©í–¥ì„±ì´ ë°”ë€Œì–´ì•¼ í•œë‹¤ê³  ìƒê°ã† ë§¡ì€ ì—…ë¬´ì˜ ë³¸ì§ˆ(ì•„ì´í‹° ê¸°ìˆ ë ¥)ì— ëŒ€í•´ ë³´ì™„í•´ì•¼ í•¨ã† íŒ€ë³„ ê·œëª¨ê°€ ë„ˆë¬´ í¼. ì„¸ë¶„í™”í•  í•„ìš”ê°€ ìˆìŒã† ê³ ê°ì‚¬ê°€ ì¶”êµ¬í•˜ëŠ” ë°”ê°€ ì‹œìŠ¤í…œì˜ ì•ˆì •ì ì¸ ìš´ì˜ì— ì´ˆì ì´ ë§ì¶”ì–´ ìˆë‹¤ ë³´ë‹ˆ ìƒˆë¡œìš´, ê³¼ê°í•œ ì‹œë„ê°€ ì ê³  ì´ë¥¼ ì§€ì›í•˜ëŠ”ë° ìˆì–´ ë¶€ì¡±í•¨ì´ ë§ì€ ë“¯í•¨. ì´ì— ì¡°ì§ì´ ì ì  ë” íŒ¨ì‹œë¸Œí•˜ê²Œ ë°”ë€Œì–´ ê°€ê³  ìˆë‹¤ê³  ëŠê»´ ì§. ì¢€ ë” ëŠ¥ë™ì ì¸ ì¡°ì§ìœ¼ë¡œ íƒˆë°”ê¿ˆí•  ìˆ˜ ìˆë„ë¡ ë³€í™”ê°€ í•„ìš”í•˜ë‹¤ê³  ìƒê°ã† IT ì—­ëŸ‰ ì¡°ì§ ëª©í‘œë¥¼ ìœ„í•œ ë¦¬ë”: êµ¬ì„±ì›ê°„ ë‹¤ì–‘í•œ ì†Œí†µ ì±„ë„, ì†Œí†µ ê¸°íšŒ, ì†Œí†µ íšŸìˆ˜, ì†Œí†µ í”¼ë“œë°±ì´ í™•ëŒ€ë˜ì—ˆìœ¼ë©´ í•¨ã† ì „ë¬¸ê°€ë“¤ì´ ë§ìœ¼ë‹ˆ ë°€ì–´ ë¶€ì¹˜ëŠ” AGS ëŒ€í•œ ìš°ë ¤ê°€ ë§¤ìš° ë†’ìŒ. ì§„í–‰ì— ìˆì–´ êµ¬ì„±ì›ì˜ ì˜ê²¬ë„ ì²­ì·¨í•´ ì£¼ì‹œê¸° ë°”ëŒã† S3 TFëŠ” ì—¬ëŸ¬ ì¡°ì§ì˜ êµ¬ì„±ì›ì´ ëª¨ì¸ ìë¦¬. ë¬´ì¡°ê±´ ì ì¸ CAPEX ì ˆê°ì´ ì•„ë‹Œ ê¸°ìˆ  ì¶œì‹  êµ¬ì„±ì›ì˜ ì˜ê²¬ì´ ìš°ì„ ì ìœ¼ë¡œ ë°˜ì˜ë˜ì—ˆìœ¼ë©´ ì¢‹ê² ìŒã† ì™¸ë¶€ ìš”ì¸ìœ¼ë¡œ ì§„í–‰ ì¤‘ì´ë˜ í”„ë¡œì íŠ¸ê°€ ë¬´ì‚°ì´ ë˜ëŠ” ê²½ìš°ê°€ ìˆìŒ. ì´ëŸ° ê²½ìš°ì—ëŠ” íŒ€, ê·¸ë¦¬ê³  ê°œì¸ì˜ ì„±ê³¼ ë° ì„±ì·¨ê°ê³¼ ì§ê²°ë˜ë¯€ë¡œ ë¯¸ë¦¬ ì´ëŸ° ì¥ì•  ìš”ì¸ë“¤ì„ íŒŒì•…í•˜ê³ , ì‚¬ì „ì— ë°©ì§€í•˜ëŠ” íˆ´ ë“¤ì„ ë§ˆë ¨ í•´ ë‘ì–´ì•¼ í•¨ã† íšŒì‹, íŒ€ í–‰ì‚¬ ë•Œ ì‚¬ìš©í•˜ëŠ” ì§€ì› ë¹„ìš©ì´ ë¶€ì¡±
## case 19
### input- ì›Œë¼ë°¸ - ë³´ìƒ-
### outputã† ì›Œë¼ë°¸, ë³´ìƒ
## case 20
### inputì•„ì§ì€ ì˜ ëª¨ë¥´ê² ìŒÂ  Â - . ê°ì‚¬í•©ë‹ˆë‹¤. êµ¬ì„±ì› í–‰ë³µì„ ì¶”ì§„í•˜ê¸°ì— íŒ€ìš´ì˜ë¹„ ë¶€ì¡±. ë‹´ë‹¹ë‹˜ ë³´ê³ ì„œêµ¬ì²´ì ì¸ ì‚¬ë¡€ê°€ ìˆì„ ì •ë„ëŠ” ì•„ë‹ˆì§€ë§Œ ì¤‘ìš”í•œ ì¼ì´ ìˆì„ ë•Œ êµ¬ì„±ì›ì˜ ì••ë°•ê³¼ ì†Œëª¨ê°€ ì‹¬í•˜ê¸° ë•Œë¬¸ì— ë‹¹ë©´í•œ ê³¼ì œê°€ ì—†ëŠ” êµ¬ì„±ì›ì˜ ê²½ìš° ì¢€ ì ê·¹ì ìœ¼ë¡œ ì‰¬ì–´ì„œ ì—¬ë ¥ì„ íšŒë³µí•˜ëŠ” í˜•ì‹ì„ ì¢€ ë” ì¥ë ¤í–ˆìœ¼ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤.ìš°ë¦¬íŒ€ 100%ë¡œ ëŒê³ ë‚˜ê°ˆ ìˆ˜ê°€ ì—†ëŠ” ì—…ë¬´ë“¤ì…ë‹ˆë‹¤. ìš°ë¦¬íŒ€ì˜ ì„±ê³¼ë¥¼ ê²°ì •í•˜ëŠ” ìƒí™©ì´ ë§ìŠµë‹ˆë‹¤. êµ­ë‚´ì™¸ ì…ì°° ë“±ì˜ ê²½ìš°ì…ë‹ˆë‹¤. ì„¤ê³„ì„±ê³¼í’ˆì„ ì™„ì„±í•˜ì§€ë§Œ, ê²½ìŸì‚¬ ëŒ€ë¹„ ê³ í’ˆì§ˆ, ìƒìœ„ì˜ ì„±ê³¼í’ˆì„ ì™„ì„±í•˜ëŠ” ê²ƒê³¼ëŠ” ë³„ê°œë¡œ êµ­ë‚´ì…ì°°ì˜ ì„±íŒ¨ëŠ” êµ­ë‚´ì˜ì—…ì˜ ì„±íŒ¨ì— ë‹¬ë ¤ìˆê³ , í•´ì™¸ ì…ì°°ì˜ ê²½ìš° í•´ì™¸ê²¬ì ì— ë‹¬ë ¤ìˆìŠµë‹ˆë‹¤. êµ¬ì„±ì› í–‰ë³µë„ ëª¨ë‘ ë†“ì¹˜ëŠ” ìƒí™©ì´ ë°œìƒí–ˆë˜ ê²ƒ ê°™ìŠµë‹ˆë‹¤.ê³¼ê±° ì¡°ì§ì—ì„œì˜ ì‚¬ë¡€ë¥¼ ë– ì˜¬ë ¤ë³´ë©´, 1) ë¦¬ë”ì˜ ì—…ë¬´ ë°©í–¥ì„± ë¯¸ì œì‹œ, êµ¬ì„±ì› ë°©ì¹˜ 2) ê´€ê³„ ì¤‘ì‹¬ì˜ í¸í–¥ëœ ì˜ì‚¬ê²°ì •. ì˜ì‚¬ê²°ì • ê³¼ì •ì—ì„œì˜ ë¶ˆíˆ¬ëª…í•¨. íŠ¹ì • ê°€ê¹Œìš´ ì‚¬ëŒ ì˜ê²¬ ì¤‘ì‹¬ì˜ ì˜ì‚¬ê²°ì •Â 
### outputã† êµ¬ì„±ì› í–‰ë³µì„ ì¶”ì§„í•˜ê¸°ì— íŒ€ ìš´ì˜ë¹„ ë¶€ì¡±ã† ë‹´ë‹¹ë‹˜ ë³´ê³ ì„œã† êµ¬ì²´ì ì¸ ì‚¬ë¡€ê°€ ìˆì„ ì •ë„ëŠ” ì•„ë‹ˆì§€ë§Œ ì¤‘ìš”í•œ ì¼ì´ ìˆì„ ë•Œ êµ¬ì„±ì›ì˜ ì••ë°•ê³¼ ì†Œëª¨ê°€ ì‹¬í•˜ê¸° ë•Œë¬¸ì— ë‹¹ë©´í•œ ê³¼ì œê°€ ì—†ëŠ” êµ¬ì„±ì›ì˜ ê²½ìš° ì¢€ ì ê·¹ì ìœ¼ë¡œ ì‰¬ì–´ì„œ ì—¬ë ¥ì„ íšŒë³µí•˜ëŠ” í˜•ì‹ì„ ì¢€ ë” ì¥ë ¤í–ˆìœ¼ë©´ ì¢‹ê² ìŒã† ìš°ë¦¬íŒ€ 100%ë¡œ ëŒê³ ë‚˜ê°ˆ ìˆ˜ê°€ ì—†ëŠ” ì—…ë¬´ë“¤. ìš°ë¦¬íŒ€ì˜ ì„±ê³¼ë¥¼ ê²°ì •í•˜ëŠ” ìƒí™©ì´ ë§ìŒ. êµ­ë‚´ì™¸ ì…ì°° ë“±ì˜ ê²½ìš°ì„. ì„¤ê³„ì„±ê³¼í’ˆì„ ì™„ì„±í•˜ì§€ë§Œ, ê²½ìŸì‚¬ ëŒ€ë¹„ ê³ í’ˆì§ˆ, ìƒìœ„ì˜ ì„±ê³¼í’ˆì„ ì™„ì„±í•˜ëŠ” ê²ƒê³¼ëŠ” ë³„ê°œë¡œ êµ­ë‚´ì…ì°°ì˜ ì„±íŒ¨ëŠ” êµ­ë‚´ì˜ì—…ì˜ ì„±íŒ¨ì— ë‹¬ë ¤ìˆê³ , í•´ì™¸ ì…ì°°ì˜ ê²½ìš° í•´ì™¸ê²¬ì ì— ë‹¬ë ¤ìˆìŒ. êµ¬ì„±ì› í–‰ë³µë„ ëª¨ë‘ ë†“ì¹˜ëŠ” ìƒí™©ì´ ë°œìƒí–ˆë˜ ê²ƒ ê°™ìŒã† ê³¼ê±° ì¡°ì§ì—ì„œì˜ ì‚¬ë¡€ë¥¼ ë– ì˜¬ë ¤ë³´ë©´, ë¦¬ë”ì˜ ì—…ë¬´ ë°©í–¥ì„± ë¯¸ì œì‹œ, êµ¬ì„±ì› ë°©ì¹˜, ê´€ê³„ ì¤‘ì‹¬ì˜ í¸í–¥ëœ ì˜ì‚¬ê²°ì •,Â  ì˜ì‚¬ê²°ì • ê³¼ì •ì—ì„œì˜ ë¶ˆíˆ¬ëª…í•¨. íŠ¹ì • ê°€ê¹Œìš´ ì‚¬ëŒ ì˜ê²¬ ì¤‘ì‹¬ì˜ ì˜ì‚¬ê²°ì •Â 
## case 21
### inputì˜ ëª¨ë¥´ê² ìŒíŒ€ì¥ ì„ëª…ë˜ì‹  í›„ ì´ì œ 1ë‹¬ì´ë¼ ì•„ì§ ëª¨ë¥´ê² ìŠµë‹ˆë‹¤!ê°€ë” ë§ê±¸ì´ ì–´ë ¤ìš´ í¬ìŠ¤ë¥¼ ë³´ì—¬ì£¼ì‹¬ì—†ìŒ
### outputã† ê°€ë” ë§ê±¸ì´ ì–´ë ¤ìš´ í¬ìŠ¤ë¥¼ ë³´ì—¬ì£¼ì‹¬
## case 22
### inputì†Œí†µì—†ìŠµë‹ˆë‹¤.ì—†ìŒ.Xì—†ìŒ
### outputã† ì†Œí†µ
## case 23
### input ì˜ ëª¨ë¥´ê² ìŠµë‹ˆë‹¤.Â  Newton2 í™”ì´íŒ…ì…ë‹ˆë‹¤. ê±´ê°• ì§€ê¸ˆë„ ë„ˆë¬´ ì¢‹ìŠµë‹ˆë‹¤. ì˜¬ í•œí•´ í”„ë¡œì íŠ¸ë¥¼ ì˜ ì´ëŒì–´ì£¼ì„¸ìš”~ íŒ€ì´ ë” ì˜ë  ìˆ˜ ìˆë„ë¡ ë¦¬ë” ìŠ¤ìŠ¤ë¡œì˜ ì›ë™ë ¥ì´ ë–¨ì–´ì§€ì§€ ì•Šì•˜ìœ¼ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤. ì§€ê¸ˆì²˜ëŸ¼ í•´ì£¼ì‹œë©´ ë  ê²ƒ ê°™ìŠµë‹ˆë‹¤ ë”±íˆ ë– ì˜¤ë¥´ëŠ”ê²Œ ì—†ìŒíŠ¹ì´ì‚¬í•­ ì—†ìŒ
### outputã† Newton2 í™”ì´íŒ…ã† ê±´ê°•ã† ì§€ê¸ˆë„ ë„ˆë¬´ ì¢‹ìŒã† ì˜¬ í•œí•´ í”„ë¡œì íŠ¸ë¥¼ ì˜ ì´ëŒì–´ì£¼ì‹œê¸° ë°”ëŒã† íŒ€ì´ ë” ì˜ë  ìˆ˜ ìˆë„ë¡ ë¦¬ë” ìŠ¤ìŠ¤ë¡œì˜ ì›ë™ë ¥ì´ ë–¨ì–´ì§€ì§€ ì•Šì•˜ìœ¼ë©´ ì¢‹ê² ìŒã† ì§€ê¸ˆì²˜ëŸ¼ í•´ì£¼ì‹œë©´ ë  ê²ƒ ê°™ìŒ
## case24
### inputì—†ìŒ 0
### outputã† ì‘ë‹µ ë‚´ìš© ì—†ìŒ
## case25
### inputë§ˆë•…íˆ ì—†ìŠµë‹ˆë‹¤ êµ¬ì„±ì› ì—­ëŸ‰ í™•ë³´ë¥¼ ìœ„í•œ êµìœ¡ì§€ì› 0 ì—†ìŒ, ì—†ìŒ ì˜ì‚¬ ê²°ì • ì‹œ ì‹ ì†ì„±Â  ì—†ìŠµë‹ˆë‹¤. . ì—†ìŒ 23, 24ë²ˆ ë‹µë³€ê³¼ ë™ì¼í•˜ê²Œ ëŒ€ë©´í•  ì¼ì´ ì ì–´ ëª¨ë¥´ê² ìŠµë‹ˆë‹¤.
### outputã† êµ¬ì„±ì› ì—­ëŸ‰ í™•ë³´ë¥¼ ìœ„í•œ êµìœ¡ ì§€ì›ã† ì˜ì‚¬ ê²°ì • ì‹œ ì‹ ì†ì„±
## case26
### input(1) í’ë¶€í•œ í’ˆì§ˆ ì—…ë¬´ ê²½í—˜ì„ ë°”íƒ•ìœ¼ë¡œ ì–´ë–¤ ë¬¸ì œì— ëŒ€í•œ ë…¼ë¦¬ì  ì ‘ê·¼ ì‹œì•¼ê°€ ë„“ê³ , ë¬¸ì œ í•´ê²° ëŠ¥ë ¥ì´ íƒì›”í•˜ë‹¤. (2) íŒ€ì›ë“¤ê³¼ ê²© ì—†ì´ ìœµí•©í•˜ê³  ì´ëŒì–´ê°€ëŠ” ëŠ¥ë ¥ì´ íƒì›”í•˜ë‹¤.
### outputã† í’ë¶€í•œ í’ˆì§ˆ ì—…ë¬´ ê²½í—˜ì„ ë°”íƒ•ìœ¼ë¡œ ì–´ë–¤ ë¬¸ì œì— ëŒ€í•œ ë…¼ë¦¬ì  ì ‘ê·¼ ì‹œì•¼ê°€ ë„“ê³ , ë¬¸ì œ í•´ê²° ëŠ¥ë ¥ì´ íƒì›”í•¨. íŒ€ì›ë“¤ê³¼ ê²© ì—†ì´ ìœµí•©í•˜ê³  ì´ëŒì–´ê°€ëŠ” ëŠ¥ë ¥ì´ íƒì›”í•¨
## case27
### input NA
### outputã† ì‘ë‹µ ë‚´ìš© ì—†ìŒÂ 

### input{text}
### output
"""

# [2ë‹¨ê³„] ì¤„ë°”ê¿ˆ ë° ì •ë¦¬
PROMPT_FORMAT = """ã† ê¸°ì¤€ìœ¼ë¡œ ì¤„ë°”ê¿ˆì„ í•´ì£¼ì„¸ìš”. ã† ëŠ” ì§€ìš°ì§€ë§ê³  ë§¨ ì•ì— ìœ ì§€í•´ì£¼ì„¸ìš”.
{text}
"""

# [3ë‹¨ê³„] ì£¼ì œë³„ ê·¸ë£¹í™”
PROMPT_GROUPING = """ë‹¤ìŒ í…ìŠ¤íŠ¸ë¥¼ ë¶„ì„í•˜ì—¬ ìœ ì‚¬í•œ ì£¼ì œë¼ë¦¬ ë¬¶ì–´ì£¼ì„¸ìš”.
ê° ì£¼ì œë³„ë¡œ ì ì ˆí•œ íƒ€ì´í‹€(í‚¤ì›Œë“œ)ì„ ë‹¬ê³ , ì•„ë˜ í˜•ì‹ì— ë§ì¶° ì‘ì„±í•´ì£¼ì„¸ìš”.
ë‚´ìš©ì€ ì…ë ¥ëœ ë¬¸ì¥ì˜ ê·¸ëŒ€ë¡œ ìœ ì§€í•˜ë©° ë‚˜ì—´í•´ì£¼ì„¸ìš”.

**ì£¼ì˜ì‚¬í•­:**
1. ê° ì¤„ ì‚¬ì´ì—ëŠ” ë¹ˆ ì¤„(ì—”í„°)ì„ ë„£ì§€ ë§ê³ , ë°”ë¡œ ë‹¤ìŒ ì¤„ì— ë‚´ìš©ì„ ì´ì–´ ì‘ì„±í•´ì£¼ì„¸ìš”.
2. ê° ì¤„ì˜ ì‹œì‘ì€ 'ã† 'ë¡œ ì‹œì‘í•´ì£¼ì„¸ìš”.

í˜•ì‹:
ã† [ì£¼ì œ] : ë‚´ìš©1; ë‚´ìš©2

ì˜ˆì‹œ:
ã† [ì†Œí†µ] : ìœ„í´ë¦¬ ë¿ë§Œ ì•„ë‹ˆë¼, ì§ì±…ìì—ê²Œ ê³µìœ  ë˜ëŠ” ë‚´ìš© ì¤‘ êµ¬ì„±ì›ì´ ì•Œì•„ì•¼í•˜ëŠ” ë‚´ìš©ì— ëŒ€í•´ì„œëŠ” ë°˜ë“œì‹œ ê³µìœ ; ê²©ì˜ ì—†ëŠ” ì†Œí†µì„ ìœ„í•´ ì„œë¡œ ì˜ì–´ ì´ë¦„ì„ ë¶€ë¦„
ã† [ì—…ë¬´ íš¨ìœ¨] : ë¶ˆí•„ìš”í•œ íšŒì˜ë¥¼ ì¤„ì´ê³  í•µì‹¬ ì•ˆê±´ ìœ„ì£¼ë¡œ ì§§ê²Œ ì§„í–‰í•¨

ì…ë ¥ í…ìŠ¤íŠ¸:
{text}
"""

# --------------------------------------------------------------------------
# [ë¶„ì„ ë¡œì§]
# --------------------------------------------------------------------------

def run_analysis(sh, sheet_name):
    try:
        ws = sh.worksheet(sheet_name)
    except gspread.exceptions.WorksheetNotFound:
        st.error(f"ì˜¤ë¥˜: '{sheet_name}' ì›Œí¬ì‹œíŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")
        return

    data = ws.get_all_values()
    if not data:
        st.error("ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.")
        return

    headers = data[0]
    # 2ì—´(Bì—´)ì— ì›ë³¸ ë°ì´í„°ê°€ ìˆë‹¤ê³  ê°€ì •
    input_col_idx = 1 
    
    # ê¸°ë³¸ ê²°ê³¼ ì—´ ì‹œì‘ ìœ„ì¹˜
    base_result_col_start = len(headers) + 1
    ensure_columns(ws, base_result_col_start + 2) 
    
    # ê¸°ë³¸ í—¤ë” ì—…ë°ì´íŠ¸
    ws.update_cell(1, base_result_col_start, "Point Form (B)")
    ws.update_cell(1, base_result_col_start + 1, "Summary (C)")
    ws.update_cell(1, base_result_col_start + 2, "Thematic Grouping (Slide 1)")

    df = pd.DataFrame(data[1:], columns=headers)
    progress_bar = st.progress(0)
    status_text = st.empty()
    
    for i, row in df.iterrows():
        idx = i + 2
        input_text = row.iloc[input_col_idx]
        
        if not input_text or pd.isna(input_text):
            progress_bar.progress((i + 1) / len(df))
            continue

        # 1ë‹¨ê³„: ì¶”ì¶œ
        status_text.info(f"í–‰ {idx}: (1/3) í•µì‹¬ ì¶”ì¶œ ì¤‘...")
        r1 = call_gpt(input_text, PROMPT_EXTRACT)
        ws.update_cell(idx, base_result_col_start, r1)
        time.sleep(0.5)

        # 2ë‹¨ê³„: ì •ë¦¬
        status_text.info(f"í–‰ {idx}: (2/3) ìš”ì•½ ì •ë¦¬ ì¤‘...")
        r2 = call_gpt(r1, PROMPT_FORMAT)
        ws.update_cell(idx, base_result_col_start + 1, r2)
        time.sleep(0.5)

        # 3ë‹¨ê³„: ê·¸ë£¹í™” ë° ìŠ¤ë§ˆíŠ¸ ë¶„í•  ì €ì¥
        status_text.info(f"í–‰ {idx}: (3/3) ê·¸ë£¹í™” ë° ìŠ¤ë§ˆíŠ¸ ë¶„í•  ì €ì¥ ì¤‘...")
        r3 = call_gpt(r2, PROMPT_GROUPING)
        
        # --- [Smart Split Logic V2] ---
        lines = [line.strip() for line in r3.split('\n') if line.strip()]
        chunks = []
        current_chunk = []
        current_char_count = 0
        
        for line in lines:
            line_length = len(line)
            # ì¡°ê±´: (í˜„ì¬ ì¤„ ìˆ˜ >= ìµœëŒ€ ì¤„ ìˆ˜) OR (í˜„ì¬ ê¸€ì ìˆ˜ + ìƒˆ ì¤„ ê¸€ì ìˆ˜ > ìµœëŒ€ ê¸€ì ìˆ˜)
            if (len(current_chunk) >= MAX_LINES_PER_CELL) or \
               (current_char_count + line_length > MAX_CHARS_PER_CELL):
                
                if current_chunk: chunks.append("\n".join(current_chunk))
                current_chunk = [line]
                current_char_count = line_length
            else:
                current_chunk.append(line)
                current_char_count += line_length
        
        if current_chunk: chunks.append("\n".join(current_chunk))
        if not chunks: chunks = ["ì‘ë‹µ ì—†ìŒ"]

        # ë¶„í• ëœ ë©ì–´ë¦¬ ì €ì¥
        grouping_start_col = base_result_col_start + 2
        ensure_columns(ws, grouping_start_col + len(chunks))
        
        for k, chunk in enumerate(chunks):
            target_col = grouping_start_col + k
            
            # ìƒˆ ì—´ì— í—¤ë” ì¶”ê°€
            if k > 0:
                current_header = ws.cell(1, target_col).value
                if not current_header:
                    ws.update_cell(1, target_col, f"Thematic Grouping (Slide {k+1})")
            
            ws.update_cell(idx, target_col, chunk)
        # -----------------------------
        
        progress_bar.progress((i + 1) / len(df))
        
    status_text.empty()
    st.success(f"âœ… '{sheet_name}' ë¶„ì„ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!")
    st.balloons()


# --- ë©”ì¸ ì‹¤í–‰ ---

def main():
    col1, col2 = st.columns([3, 1])
    with col1:
        url = st.text_input("1. ë¶„ì„í•  êµ¬ê¸€ ìŠ¤í”„ë ˆë“œì‹œíŠ¸ URL ì…ë ¥:")
    with col2:
        # ì£¼ê´€ì‹ ë¶„ì„ ìœ í˜•ë§Œ ë‚¨ê¹€
        target_sheet = st.selectbox("2. ë¶„ì„í•  ì‹œíŠ¸ ì´ë¦„ ì„ íƒ:", [
            "ì´ë¯¸ì§€", 
            "ê°•ì ", 
            "ë³´ì™„", 
            "ì¥ì• ìš”ì¸"
        ])

    if st.button("ë¶„ì„ ì‹œì‘ ğŸš€", type="primary"):
        if not url:
            st.warning("URLì„ ì…ë ¥í•´ì£¼ì„¸ìš”.")
            return
            
        try:
            sh = gc.open_by_url(url)
            run_analysis(sh, target_sheet)

        except Exception as e:
            st.error(f"ì˜¤ë¥˜ ë°œìƒ: {e}")

if __name__ == "__main__":
    main()
